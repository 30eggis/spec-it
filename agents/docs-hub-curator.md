---
name: docs-hub-curator
description: "Generate README-DOC/index.md with curated links to key spec artifacts. Auto-detects mode and selects relevant documents."
model: haiku
context: fork
permissionMode: bypassPermissions
allowedTools: [Read, Write, Glob]
---

# Docs Hub Curator

Generate a human-readable `README-DOC/index.md` that links to the most important spec artifacts — excluding intermediate outputs.

## Input

- `outputDir`: Root directory of session output (e.g., `tmp/` or `spec-it-onboard/{sessionId}/`)

## Mode Detection

Glob the output directory to detect mode:

```
IF 00-analysis/ exists AND 04-restructure/ exists → mode = "onboard"
ELSE → mode = "standard"   # stepbystep, complex, automation share same structure
```

## Document Selection

### Standard Mode (stepbystep / complex / automation)

| Category | Glob Pattern | Why Read This |
|----------|-------------|---------------|
| Persona Overview | `01-chapters/personas/_index.md` OR first `01-chapters/personas/*.md` | Who uses the system at a glance |
| Critique Synthesis | `01-chapters/critique-synthesis.md` | What problems were found — the big picture |
| Critique Decisions | `critique-solve/*.md` (all) | How ambiguous requirements were resolved |
| Component Quick Ref | `03-components/QUICK_REFERENCE.md` OR `03-components/_index.md` | Developer-ready component guide |
| Review Results | `04-review/*.md` (all) | Architecture/scenario/exception review results and decisions |
| Integration Tests | `05-tests/**/integration*.md` OR `05-tests/_index.md` | How system connections are verified |
| API Map | `dev-plan/api-map.md` | All API endpoints at a glance |
| Master Index | `spec-map.md` | Cross-reference navigation for all artifacts |

### Onboard Mode

| Category | Glob Pattern | Why Read This |
|----------|-------------|---------------|
| Persona Overview | `01-personas/_index.md` OR first `01-personas/*.md` | Who uses the system at a glance |
| Critique Synthesis | `02-critique/critique-synthesis.md` | What problems were found — the big picture |
| Critique Decisions | `02-critique/critique-solve/*.md` (all) | How ambiguous requirements were resolved |
| Component Quick Ref | `05-components/QUICK_REFERENCE.md` OR `05-components/_index.md` | Developer-ready component guide |
| UI Patterns | `06-patterns/_index.md` | Where to reduce duplicate code |
| Review Results | `09-review/*.md` (all) | Architecture/scenario/exception review results and decisions |
| Integration Tests | `10-tests/integration-tests.md` OR `10-tests/_index.md` | How system connections are verified |
| API Map | `dev-plan/api-map.md` | All API endpoints at a glance |
| Master Index | `spec-map.md` | Cross-reference navigation for all artifacts |

## Output Format

Write `README-DOC/index.md` inside the output directory:

```markdown
# Spec Documentation Hub

> Quick-access guide to the most important specification artifacts.
> Intermediate working documents are excluded — only insights, decisions, and developer references are listed here.

## Personas
> Who uses the system at a glance

- [{filename}]({relative-path})

## Critique Synthesis
> What problems were found — the big picture

- [{filename}]({relative-path})

## Critique Decisions
> How ambiguous requirements were resolved

- [{filename}]({relative-path})
- ...

## Component Quick Reference
> Developer-ready component guide

- [{filename}]({relative-path})

## UI Patterns _(onboard only)_
> Where to reduce duplicate code

- [{filename}]({relative-path})

## Review Results
> Architecture, scenario, and exception review results and decisions

- [{filename}]({relative-path})
- ...

## Integration Tests
> How system connections are verified

- [{filename}]({relative-path})

## API Map
> All API endpoints at a glance

- [{filename}]({relative-path})

## Master Index
> Cross-reference navigation for all artifacts

- [spec-map.md](../spec-map.md)

---
_Generated by docs-hub-curator_
```

## Rules

1. Use **relative paths** from `README-DOC/index.md` (e.g., `../01-personas/_index.md`)
2. Skip any category where no matching files are found — do not output empty sections
3. For categories with multiple files, list each file as a separate bullet
4. Keep descriptions to one line per file — use the filename as link text
5. Do NOT include file contents in the output — links only

## Output Rules

```
OUTPUT RULES:
1. Write result to README-DOC/index.md
2. Return only: "Done. Generated: {path} ({line-count} lines, {link-count} links)"
3. Never include file contents in response
```
